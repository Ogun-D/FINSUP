<!---

<% @request.responses.each do |response| %>
  <% if response.sender.role == 'advisor' %>
   <div class="d-flex">
     <div class="advisor-message">
       <%= response.content %>
     </div>
   </div>
  <% else %>
   <div class="d-flex justify-content-end">
     <div class ="client-message">
       <%= response.content %>
     </div>
   </div>
  <% end %>
<% end %>


<%= simple_form_for :response, url: request_responses_path(@request), method: :post do |f| %>
  <%= f.input :content, label: false, placeholder: 'Type here' %>
<% end %>
 --->

<h1>Chat</h1>
<div>
  <%= simple_form_for :response, url: request_responses_path(@request) do |form| %>
    <%= form.input :content, label: false, placeholder: 'Type here' %>
    <%= form.submit %>
  <% end %>
</div>
<div id="message_section">
  <h2>Messages</h2>
  <% @responses.each do |response| %>
    <p><%= response.content %></p>
  <% end %>
  <script>
      var channel = pusher.subscribe('response-channel');
      channel.bind('new-response', function(data) {
          let response = data.response;
          var div = document.getElementById('message_section');
          div.innerHTML += `<p> ${response} </p>`;
      });
  </script>
</div>
